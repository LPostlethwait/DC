<html>
	<head>
        <title>
            My first Three.js app
        </title>
        <style>
            body { margin: 0; }
            canvas { width: 100%; height: 100%; }

            #maze {
                border-collapse: collapse;
                margin: 5px;
            }
            
            #maze td {
                width: 10px;
                height: 10px;
                line-height: 0;
            }
        </style>
	</head>
	<body>
		<script src="three.js"></script>
        <script src="orbit_controls.js"></script>
        <script src="maze_generator.js"></script>
        <script src="maze_renderer.js"></script>

        <script>var maze_array = newMaze(10, 10);</script>
        
        <table id="maze"><tbody></tbody></table>
        <script>
            var disp = maze_array;
            var border = '2px solid black';
            for (var i = 0; i < disp.length; i++) {
                var tr = document.createElement('tr');
                for (var j = 0; j < disp[i].length; j++) {
                    var selector = i+"-"+j;
                    var td = document.createElement('td');
                    td.setAttribute('id', td.id = selector);
                    td.innerHTML = '&nbsp;';
                    tr.appendChild(td);
                    if (disp[i][j][0] === 0) td.style.borderTop = border; 
                    if (disp[i][j][1] === 0) td.style.borderRight = border; 
                    if (disp[i][j][2] === 0) td.style.borderBottom = border; 
                    if (disp[i][j][3] === 0) td.style.borderLeft = border;
                }
                maze.firstChild.appendChild(tr);
            }
        </script>
        
		<script>
			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            camera.position.z = 100;

            var controls = new THREE.OrbitControls( camera );
            
			var renderer = new THREE.WebGLRenderer();
			renderer.setSize(window.innerWidth, window.innerHeight);
			document.body.appendChild(renderer.domElement);

			var geometry = new THREE.CubeGeometry(10,10,10);
			var material = new THREE.MeshBasicMaterial({color: 0x00ff00});
			var cube = new THREE.Mesh(geometry, material);
			//scene.add(cube);
            
            var maze = renderMaze(maze_array, new THREE.MeshNormalMaterial({}));
            //console.log(maze);
            //scene.add(maze);

            window.onresize = function () {
                camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
                
				renderer.setSize( window.innerWidth, window.innerHeight );
            };
            
			function renderFrame () {
				requestAnimationFrame(renderFrame);

                controls.update();
                
				cube.rotation.x += 0.1;
				cube.rotation.y += 0.1;

				renderer.render(scene, camera);
			};

			renderFrame();
		</script>
	</body>
</html>
